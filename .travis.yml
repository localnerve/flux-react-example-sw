language: node_js
node_js:
- '4.2'
env:
  global:
    - DEPLOY_URL=$(if test $TRAVIS_BRANCH = master; then echo "https://pwa-stage.localnerve.net"; elif test $TRAVIS_BRANCH = production; then echo "https://pwa.localnerve.net"; else echo "."; fi)
    - secure: JX3YuDKx3PLp9lTdWPfilIH80vVEMpxX4sEo+xowhkounTCLRZ9ssjc+E9TPqaqP4FczZv+I7SYzW13W1YrxNO0oCab0NnVKrPtcF7bHRJ0ZapGHDADRsf0T35GsEKJH4Ufpd+1FWD7LzgbYSARmyd6vHPTwCMtLAle3yNLQS+flVX3mq95jbwv2f7kHlgvBLy0ifTeIdSVyoKK1pZhNeHaB8hy+jR92AKRWT+NOow04EdJQc4lYIha0t7n0ief/A5AuB8H77n7tkWtHEA0wi3R17fys1ga9eUUC+y4HqeJqftp7eggxzrBEJ6a+s9DkZ4jjkMLuAAztwehFiU4bRua5CLv0KLZ0IsZTMy9FhJIISvbhsBPVqSyCNmeljQTo/aZCJ2MMK2kSqaIUpBMPsZ5YPRpoSuWZwnq1zDtUBUX1emNX4U1eTLPhLgsip+4MLrBatD+zIGZJRCay5vvwVYylqJy5cR6TK/0nxamfvaCCVDvHW0rZddYm8fXIiVNqBM2xXxa4l4M9LDW9KiRmByFQePO5Al5T2m1LNGmF/V3iX4BQM9UEOsTz3fzkiU1fNNPd3FcJHc6YKYxI8Dt+6DCh0RoukPTd55v2JlqK5UwElxQQgB+YIv4aGnKNTPge8notsS/9qEZfn5o9NHB1Dl7xlG7XsCMcZzL4Nbz+HRE=
before_install:
- sudo apt-get update
- sudo apt-get install rubygems
- gem install compass
before_script:
- npm install -g grunt-cli
after_success:
- cat reports/coverage/lcov.info | ./node_modules/.bin/coveralls
before_deploy:
- npm run build
- rm -rf node_modules/
deploy:
  provider: heroku
  api_key:
    secure: DfC+naYDIR8JXr9vN+UZCJ8Gdf6rEVbYlsUXlyNj5xt7tccgBiGwZwl+QfoEZrZ4lKzlAoxv5nTEu0sVoP7Ii+htKK+YDqtwN4KsFtfQ45TidgPPYUdZx/w+/eaDdMh1OBoYEonvB9IXjZqTBR3tgabBq3291CHPq9BCdhkFUvwqQ2Zd5haqA10rZiLjQb38j2YZLKrOcyaMRe8CaIQsCAi282WnJ2vMMeumRJc2Z7o89Uypc/Pg9mB4d0mwHbKWw3jLb+j+TIyllXHYyunTZ9aIXcqe03E/wgZiI+HELUhKcHLLvAIsXrvrRiugzsraoJVc3QfFB0cowcf0+b34AxhJkiBAh07KIEPRWOgISC13EobvETAAk0347ESvH9i4si10ZcjT5usv3wP469zv4s8V3vr33CtayOEJ5ZEYwTegHZHethSNcBVKYwFhfBCL3KkLq0aA+wEFGX/f10RDfAsmfCUOyY6q5faaddsNQrYBBOIKY+DE7GiHSnCSEwgnd8SFIHIdKhja2JIywxDLkhCtRGQ+0v8Uu5LNKyymlBUUASoRYr/ZDB33Gm2JQPRL4bBLgEQo6N6l0cyWPI/f/6oC9iNCV9H1yUE7YgMHiZRFLxRJt4oE7k6xLyzafBQ0YTNydosGE8gE6MRqs9mSdBHNdA4cTtpxikaPUsObNBU=
  app:
    master: pwa-stage
    production: pwa
  skip_cleanup: true
  on:
    branch:
    - master
    - production
    repo: localnerve/flux-react-example-sw
    node: 4.2
after_deploy:
- npm install
- grunt perfbudget:mobile
